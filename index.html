<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Property Tracker - Real Estate Investment Manager</title>
    <style>
        /* All the previous CSS remains the same */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: #f5f7fa;
            padding: 0;
            overflow-x: hidden;
        }
        
        .mobile-container {
            max-width: 480px;
            margin: 0 auto;
            background: white;
            min-height: 100vh;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
            position: relative;
            padding-bottom: 70px;
            transition: transform 0.3s ease;
        }
        
        .mobile-container.drawer-open {
            transform: translateX(280px);
        }
        
        .status-bar {
            background: #667eea;
            color: white;
            padding: 8px 16px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 12px;
        }
        
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 16px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .header-left {
            flex: 1;
        }
        
        .header h1 {
            font-size: 22px;
            font-weight: 700;
        }
        
        .header p {
            font-size: 12px;
            opacity: 0.9;
        }
        
        .menu-btn {
            background: rgba(255,255,255,0.2);
            border: none;
            color: white;
            font-size: 24px;
            width: 40px;
            height: 40px;
            border-radius: 8px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .content {
            padding: 16px;
        }
        
        .screen {
            display: none;
        }
        
        .screen.active {
            display: block;
        }
        
        /* Progress Bar */
        .progress-container {
            padding: 16px;
            background: white;
        }
        
        .progress-text {
            color: #666;
            font-size: 12px;
            margin-bottom: 8px;
            text-align: center;
        }
        
        .progress-bar {
            height: 4px;
            background: #e0e0e0;
            border-radius: 2px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: #667eea;
            transition: width 0.4s ease;
        }
        
        /* Form Steps */
        .form-step {
            display: none;
            animation: fadeIn 0.3s ease;
        }
        
        .form-step.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .form-title {
            font-size: 18px;
            font-weight: 600;
            color: #000;
            margin-bottom: 20px;
        }
        
        .form-group {
            margin-bottom: 16px;
        }
        
        .form-label {
            display: block;
            font-size: 14px;
            font-weight: 500;
            color: #333;
            margin-bottom: 8px;
        }
        
        .input-field {
            width: 100%;
            padding: 12px;
            border: 1px solid #d0d0d0;
            border-radius: 4px;
            font-size: 15px;
            background: white;
            font-family: inherit;
        }
        
        .input-field:focus {
            outline: none;
            border-color: #667eea;
        }
        
        /* Toggle Buttons */
        .toggle-container {
            display: flex;
            gap: 0;
            border: 1px solid #d0d0d0;
            border-radius: 4px;
            overflow: hidden;
        }
        
        .toggle-option {
            flex: 1;
            padding: 12px;
            background: white;
            border: none;
            border-right: 1px solid #d0d0d0;
            font-size: 14px;
            font-weight: 500;
            color: #666;
            cursor: pointer;
        }
        
        .toggle-option:last-child {
            border-right: none;
        }
        
        .toggle-option.active {
            background: #667eea;
            color: white;
        }
        
        /* Choice Chips */
        .chips-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-top: 12px;
        }
        
        .chip-btn {
            padding: 14px 12px;
            background: white;
            border: 1px solid #d0d0d0;
            border-radius: 4px;
            font-size: 14px;
            font-weight: 500;
            color: #333;
            cursor: pointer;
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
        }
        
        .chip-btn.selected {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }
        
        /* Number Stepper */
        .stepper-group {
            display: flex;
            align-items: center;
            gap: 16px;
            justify-content: center;
        }
        
        .stepper-btn {
            width: 40px;
            height: 40px;
            border: 1px solid #d0d0d0;
            border-radius: 50%;
            background: white;
            color: #666;
            font-size: 24px;
            cursor: pointer;
        }
        
        .stepper-value {
            font-size: 20px;
            font-weight: 600;
            min-width: 60px;
            text-align: center;
        }
        
        /* Summary Box */
        .summary-box {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 16px;
            margin-bottom: 20px;
            border-left: 4px solid #667eea;
        }
        
        .summary-row {
            padding: 6px 0;
            font-size: 14px;
            color: #333;
        }
        
        /* Info Box */
        .info-box {
            background: #e3f2fd;
            border-left: 4px solid #2196f3;
            padding: 16px;
            border-radius: 4px;
            margin-top: 20px;
        }
        
        .info-box-title {
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 8px;
        }
        
        /* Image Upload */
        .image-upload-area {
            border: 2px dashed #d0d0d0;
            border-radius: 8px;
            padding: 40px 20px;
            text-align: center;
            cursor: pointer;
            margin-bottom: 12px;
        }
        
        .image-upload-area:hover {
            border-color: #667eea;
            background: #f0f4ff;
        }
        
        .image-preview {
            width: 100%;
            height: 150px;
            border-radius: 8px;
            object-fit: cover;
            margin-bottom: 12px;
        }
        
        /* Buttons */
        .btn {
            padding: 14px 20px;
            border: none;
            border-radius: 4px;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .btn-primary {
            background: #667eea;
            color: white;
            width: 100%;
        }
        
        .btn-secondary {
            background: white;
            color: #666;
            border: 1px solid #d0d0d0;
            flex: 1;
        }
        
        .button-row {
            display: flex;
            gap: 12px;
            margin-top: 20px;
        }
        
        /* Property Cards */
        .property-card {
            border: 1px solid #e0e0e0;
            border-radius: 10px;
            padding: 16px;
            margin-bottom: 12px;
            background: white;
            transition: box-shadow 0.2s;
        }
        
        .property-card:hover {
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        
        .property-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 12px;
        }
        
        .property-image {
            width: 60px;
            height: 60px;
            border-radius: 8px;
            object-fit: cover;
        }
        
        .property-icon {
            width: 60px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
            background: #f5f5f5;
            border-radius: 8px;
        }
        
        .property-info {
            flex: 1;
        }
        
        .property-name {
            font-size: 16px;
            font-weight: 600;
            color: #333;
            margin-bottom: 4px;
        }
        
        .property-details {
            font-size: 12px;
            color: #666;
        }
        
        .property-actions {
            display: flex;
            gap: 8px;
            margin-top: 12px;
        }
        
        .btn-small {
            padding: 8px 16px;
            font-size: 13px;
            border-radius: 4px;
        }
        
        /* Bottom Navigation */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            width: 100%;
            max-width: 480px;
            left: 50%;
            transform: translateX(-50%);
            background: white;
            border-top: 1px solid #e0e0e0;
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            z-index: 1000;
        }
        
        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 10px;
            border: none;
            background: white;
            cursor: pointer;
            font-size: 10px;
            color: #999;
        }
        
        .nav-item.active {
            color: #667eea;
        }
        
        .nav-item span:first-child {
            font-size: 20px;
            margin-bottom: 4px;
        }
        
        /* Advanced Options Toggle */
        .advanced-toggle {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 12px 0;
            border-bottom: 1px solid #e0e0e0;
            margin-bottom: 16px;
            cursor: pointer;
        }
        
        .advanced-content {
            display: none;
            padding: 16px;
            background: #f8f9fa;
            border-radius: 8px;
            margin-bottom: 16px;
        }
        
        .advanced-content.active {
            display: block;
        }
        
        /* Additional styles from index.html */
        .section-title {
            font-size: 16px;
            font-weight: 600;
            color: #333;
            margin: 20px 0 12px 0;
            padding-bottom: 8px;
            border-bottom: 2px solid #e0e0e0;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin: 16px 0;
        }
        
        .stat-card {
            background: #f8f9fa;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            padding: 16px;
            text-align: center;
        }
        
        .stat-card h3 {
            font-size: 12px;
            color: #666;
            margin-bottom: 8px;
            font-weight: 500;
        }
        
        .stat-card .value {
            font-size: 22px;
            font-weight: 700;
            color: #667eea;
        }
        
        .card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 10px;
            padding: 16px;
            margin-bottom: 12px;
            text-align: center;
        }
        
        .card-label {
            font-size: 12px;
            opacity: 0.9;
            margin-bottom: 6px;
        }
        
        .card-value {
            font-size: 20px;
            font-weight: 700;
        }
        
        table.data-table {
            width: 100%;
            border-collapse: collapse;
            margin: 16px 0;
            font-size: 13px;
        }
        
        table.data-table th {
            background: #667eea;
            color: white;
            padding: 10px 8px;
            text-align: left;
            font-weight: 600;
        }
        
        table.data-table td {
            padding: 10px 8px;
            border-bottom: 1px solid #e0e0e0;
        }
        
        table.data-table tr:nth-child(even) {
            background: #f8f9fa;
        }
        
        .result-box {
            background: #10b981;
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            margin: 20px 0;
        }
        
        .result-box p {
            font-size: 13px;
            margin-bottom: 8px;
        }
        
        .result-box h2 {
            font-size: 32px;
            font-weight: 700;
        }
        
        .chart-placeholder {
            background: #f8f9fa;
            border: 2px dashed #ddd;
            border-radius: 10px;
            padding: 40px 16px;
            text-align: center;
            color: #999;
            margin: 16px 0;
            font-size: 13px;
        }
        
        .button-group {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-top: 20px;
        }
        
        .btn-success {
            background: #10b981;
            color: white;
        }
        
        .btn-success:active {
            background: #059669;
        }
        
        .status-badge {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 11px;
            font-weight: 600;
        }
        
        .badge-active {
            background: #d1fae5;
            color: #065f46;
        }
        
        .badge-pending {
            background: #fef3c7;
            color: #92400e;
        }
        
        .badge-scheduled {
            background: #dbeafe;
            color: #1e40af;
        }
        
        .side-drawer {
            position: fixed;
            top: 0;
            left: -280px;
            width: 280px;
            height: 100%;
            background: white;
            box-shadow: 2px 0 10px rgba(0,0,0,0.1);
            z-index: 100;
            transition: left 0.3s ease;
            overflow-y: auto;
            padding-top: 20px;
        }
        
        .side-drawer.open {
            left: 0;
        }
        
        .drawer-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 99;
            display: none;
        }
        
        .drawer-overlay.active {
            display: block;
        }
        
        .drawer-header {
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            display: flex;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .drawer-header .avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: rgba(255,255,255,0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            margin-right: 15px;
        }
        
        .drawer-header .user-info h3 {
            font-size: 18px;
            margin-bottom: 5px;
        }
        
        .drawer-header .user-info p {
            font-size: 13px;
            opacity: 0.8;
        }
        
        .drawer-menu {
            list-style: none;
        }
        
        .drawer-menu li {
            border-bottom: 1px solid #f0f0f0;
        }
        
        .drawer-menu a {
            display: flex;
            align-items: center;
            padding: 16px 20px;
            color: #333;
            text-decoration: none;
            transition: background 0.2s;
        }
        
        .drawer-menu a:hover {
            background: #f5f7fa;
        }
        
        .drawer-menu a.active {
            background: #f0f4ff;
            color: #667eea;
            border-left: 4px solid #667eea;
        }
        
        .drawer-menu .icon {
            margin-right: 15px;
            font-size: 20px;
            width: 24px;
            text-align: center;
        }
        
        @media (max-width: 480px) {
            .mobile-container {
                max-width: 100%;
                box-shadow: none;
            }
            
            .bottom-nav {
                max-width: 100%;
            }
            
            .side-drawer {
                width: 85%;
                left: -85%;
            }
            
            .mobile-container.drawer-open {
                transform: translateX(85%);
            }
        }
    </style>
</head>
<body>

<div class="side-drawer" id="sideDrawer">
    <div class="drawer-header">
        <div class="avatar">👤</div>
        <div class="user-info">
            <h3>Parth Dattani</h3>
            <p>Investor</p>
        </div>
    </div>
    
    <ul class="drawer-menu">
        <li><a href="#" class="drawer-nav-item active" data-screen="home-screen">
            <span class="icon">🏠</span>
            <span>Dashboard</span>
        </a></li>
        <li><a href="#" class="drawer-nav-item" data-screen="properties">
            <span class="icon">🏢</span>
            <span>Properties</span>
        </a></li>
        <li><a href="#" class="drawer-nav-item" data-screen="add-property-screen">
            <span class="icon">➕</span>
            <span>Add Property</span>
        </a></li>
        <li><a href="#" class="drawer-nav-item" data-screen="loan-management">
            <span class="icon">💳</span>
            <span>Loan Management</span>
        </a></li>
        <li><a href="#" class="drawer-nav-item" data-screen="mortgage-calculator">
            <span class="icon">🧮</span>
            <span>Mortgage Calculator</span>
        </a></li>
        <li><a href="#" class="drawer-nav-item" data-screen="roi-calculator">
            <span class="icon">📈</span>
            <span>ROI Calculator</span>
        </a></li>
        <li><a href="#" class="drawer-nav-item" data-screen="future-value-calculator">
            <span class="icon">💰</span>
            <span>Future Value Calculator</span>
        </a></li>
        <li><a href="#" class="drawer-nav-item" data-screen="present-value-calculator">
            <span class="icon">💸</span>
            <span>Present Value Calculator</span>
        </a></li>
        <li><a href="#" class="drawer-nav-item" data-screen="down-payment-calculator">
            <span class="icon">🏦</span>
            <span>Down Payment Calculator</span>
        </a></li>
        <li><a href="#" class="drawer-nav-item" data-screen="expenses">
            <span class="icon">💸</span>
            <span>Expenses</span>
        </a></li>
        <li><a href="#" class="drawer-nav-item" data-screen="income">
            <span class="icon">💵</span>
            <span>Income</span>
        </a></li>
        <li><a href="#" class="drawer-nav-item" data-screen="rent-roll">
            <span class="icon">🏘️</span>
            <span>Rent Roll</span>
        </a></li>
        <li><a href="#" class="drawer-nav-item" data-screen="analytics">
            <span class="icon">📊</span>
            <span>Analytics</span>
        </a></li>
        <li><a href="#" class="drawer-nav-item" data-screen="cash-flow">
            <span class="icon">📊</span>
            <span>Cash Flow</span>
        </a></li>
        <li><a href="#" class="drawer-nav-item" data-screen="alerts">
            <span class="icon">🔔</span>
            <span>Notifications</span>
        </a></li>
        <li><a href="#" class="drawer-nav-item" data-screen="settings">
            <span class="icon">⚙️</span>
            <span>Settings</span>
        </a></li>
    </ul>
</div>

<div class="drawer-overlay" id="drawerOverlay"></div>

<div class="mobile-container" id="mobileContainer">
    
    <!-- Home Screen -->
    <div class="screen active" id="home-screen">
        <div class="status-bar">
            <span>9:41</span>
            <span>📶 📡 🔋</span>
        </div>
        
        <div class="header">
            <div class="header-left">
                <h1>Dashboard</h1>
                <p>Your Portfolio</p>
            </div>
            <button class="menu-btn" id="menuBtn">☰</button>
        </div>
        
        <div class="content">
            <h2 class="section-title">Portfolio Summary</h2>
            
            <div class="stats-grid">
                <div class="stat-card">
                    <h3>Total Properties</h3>
                    <div class="value" id="total-properties">12</div>
                </div>
                <div class="stat-card">
                    <h3>Total Value</h3>
                    <div class="value" id="total-value">$8.5M</div>
                </div>
                <div class="stat-card">
                    <h3>Total ROI</h3>
                    <div class="value" id="total-roi">15.2%</div>
                </div>
                <div class="stat-card">
                    <h3>Cash Flow</h3>
                    <div class="value" id="total-cash-flow">$12.5K</div>
                </div>
            </div>
            
            <h2 class="section-title">Key Metrics</h2>
            
            <div class="card">
                <div class="card-label">Total Equity</div>
                <div class="card-value" id="total-equity">$2.1M</div>
            </div>
            
            <div class="card">
                <div class="card-label">Loan Balance</div>
                <div class="card-value" id="total-loan-balance">$6.4M</div>
            </div>
            
            <div class="card">
                <div class="card-label">Annual NOI</div>
                <div class="card-value" id="total-annual-noi">$685K</div>
            </div>
            
            <h2 class="section-title">Recent Properties</h2>
            
            <div id="properties-list">
                <div class="property-card">
                    <h3>Comfort Suites Conway</h3>
                    <div class="property-info">
                        <label>Address:</label>
                        <value>705 Museum Rd</value>
                    </div>
                    <div class="property-info">
                        <label>Purchase Price:</label>
                        <value>$4.75M</value>
                    </div>
                    <div class="property-info">
                        <label>Units:</label>
                        <value>70</value>
                    </div>
                    <div class="property-info">
                        <label>Cap Rate:</label>
                        <value>7.9%</value>
                    </div>
                    <div class="property-info">
                        <label>Cash Flow:</label>
                        <value>$3,250</value>
                    </div>
                </div>
                
                <div class="property-card">
                    <h3>Montgomery, AL</h3>
                    <div class="property-info">
                        <label>Address:</label>
                        <value>123 Evergreen St</value>
                    </div>
                    <div class="property-info">
                        <label>Purchase Price:</label>
                        <value>$150K</value>
                    </div>
                    <div class="property-info">
                        <label>Units:</label>
                        <value>1</value>
                    </div>
                    <div class="property-info">
                        <label>Cap Rate:</label>
                        <value>8.2%</value>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Add Property Screen -->
    <div class="screen" id="add-property-screen">
        <div class="status-bar">
            <span>9:41</span>
            <span>📶 📡 🔋</span>
        </div>
        
        <div class="header">
            <div>
                <h1>Add Property</h1>
                <p>Step <span id="step-number">1</span> of 4</p>
            </div>
            <button class="menu-btn" onclick="cancelAddProperty()">✕</button>
        </div>
        
        <div class="progress-container">
            <div class="progress-text">Step <span id="step-number">1</span> of 4</div>
            <div class="progress-bar">
                <div class="progress-fill" id="progress-fill" style="width: 25%"></div>
            </div>
        </div>
        
        <div class="content">
            <!-- Step 1: Property Basics -->
            <div class="form-step active" id="step-1">
                <div class="form-title">Property Basics</div>
                
                <div class="form-group">
                    <label class="form-label">Property Name *</label>
                    <input type="text" class="input-field" id="prop-name" placeholder="e.g. Downtown Apartment">
                </div>
                
                <div class="form-group">
                    <label class="form-label">City *</label>
                    <input type="text" class="input-field" id="prop-city" placeholder="e.g. New York">
                </div>
                
                <div class="form-group">
                    <label class="form-label">Property Type</label>
                    <div class="toggle-container">
                        <button class="toggle-option active" data-type="residential">Residential</button>
                        <button class="toggle-option" data-type="commercial">Commercial</button>
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Property Subtype</label>
                    <div class="chips-grid" id="subtype-chips">
                        <button class="chip-btn" data-subtype="flat">🏢 Flat</button>
                        <button class="chip-btn" data-subtype="house">🏠 House</button>
                        <button class="chip-btn" data-subtype="villa">🏰 Villa</button>
                        <button class="chip-btn" data-subtype="apartment">🏙️ Apartment</button>
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Property Status</label>
                    <div class="toggle-container">
                        <button class="toggle-option active" data-status="ready">Ready</button>
                        <button class="toggle-option" data-status="construction">Construction</button>
                        <button class="toggle-option" data-status="off-plan">Off Plan</button>
                    </div>
                </div>
                
                <div class="advanced-toggle" id="advanced-toggle">
                    <span>Advanced Details</span>
                    <span>▶</span>
                </div>
                
                <div class="advanced-content" id="advanced-content">
                    <div class="form-group">
                        <label class="form-label">Address</label>
                        <input type="text" class="input-field" id="prop-address" placeholder="Full address">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">State</label>
                        <input type="text" class="input-field" id="prop-state" placeholder="State">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">ZIP Code</label>
                        <input type="text" class="input-field" id="prop-zip" placeholder="ZIP Code">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Description</label>
                        <textarea class="input-field" id="prop-description" placeholder="Property description" rows="3"></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Contact Email</label>
                        <input type="email" class="input-field" id="prop-email" placeholder="Email">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Contact Phone</label>
                        <input type="tel" class="input-field" id="prop-phone" placeholder="Phone">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Website</label>
                        <input type="url" class="input-field" id="prop-website" placeholder="Website">
                    </div>
                </div>
                
                <div class="summary-box">
                    <div class="summary-row" id="summary-text-1">Summary will appear here</div>
                </div>
            </div>
            
            <!-- Step 2: Property Details -->
            <div class="form-step" id="step-2">
                <div class="form-title">Property Details</div>
                
                <div class="form-group">
                    <label class="form-label">Number of Units *</label>
                    <input type="number" class="input-field" id="prop-units" placeholder="e.g. 2">
                    <div class="chips-grid">
                        <button class="chip-btn" data-units="1">1</button>
                        <button class="chip-btn" data-units="2">2</button>
                        <button class="chip-btn" data-units="3">3</button>
                        <button class="chip-btn" data-units="4+">4+</button>
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Area (sq ft) *</label>
                    <input type="number" class="input-field" id="prop-area" placeholder="e.g. 1200">
                </div>
                
                <div class="form-group">
                    <label class="form-label">Bathrooms</label>
                    <div class="stepper-group">
                        <button class="stepper-btn" onclick="updateStepper('bathrooms', -1)">-</button>
                        <span class="stepper-value" id="bathrooms">2</span>
                        <button class="stepper-btn" onclick="updateStepper('bathrooms', 1)">+</button>
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Furnished</label>
                    <select class="input-field" id="prop-furnished">
                        <option value="unfurnished">Unfurnished</option>
                        <option value="furnished">Furnished</option>
                        <option value="partially">Partially Furnished</option>
                    </select>
                </div>
                
                <div class="advanced-toggle" id="advanced-toggle-2">
                    <span>Advanced Financial Details</span>
                    <span>▶</span>
                </div>
                
                <div class="advanced-content" id="advanced-content-2">
                    <div class="form-group">
                        <label class="form-label">Initial Market Value</label>
                        <input type="number" class="input-field" id="prop-initial-value" placeholder="Initial market value">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Depreciable Closing Costs</label>
                        <input type="number" class="input-field" id="prop-depreciable-costs" placeholder="Depreciable closing costs">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Other Closing Costs</label>
                        <input type="number" class="input-field" id="prop-other-costs" placeholder="Other closing costs">
                    </div>
                </div>
                
                <div class="summary-box">
                    <div class="summary-row" id="summary-text-2">Summary will appear here</div>
                </div>
            </div>
            
            <!-- Step 3: Financial Details -->
            <div class="form-step" id="step-3">
                <div class="form-title">Financial Details</div>
                
                <div class="form-group">
                    <label class="form-label">Purchase Price ($) *</label>
                    <input type="number" class="input-field" id="prop-price" placeholder="e.g. 250000">
                </div>
                
                <div class="form-group">
                    <label class="form-label">Monthly Rent ($) *</label>
                    <input type="number" class="input-field" id="prop-rent" placeholder="e.g. 1500">
                </div>
                
                <div class="form-group">
                    <label class="form-label">Annual Expenses ($) *</label>
                    <input type="number" class="input-field" id="prop-expenses" placeholder="e.g. 5000">
                </div>
                
                <div class="form-group">
                    <label class="form-label">Down Payment (%)</label>
                    <input type="number" class="input-field" id="prop-down" placeholder="e.g. 20">
                    <div class="chips-grid">
                        <button class="chip-btn" data-down="10">10%</button>
                        <button class="chip-btn" data-down="20">20%</button>
                        <button class="chip-btn" data-down="30">30%</button>
                        <button class="chip-btn" data-down="40">40%</button>
                    </div>
                </div>
                
                <div class="advanced-toggle" id="advanced-toggle-3">
                    <span>Advanced Financial Settings</span>
                    <span>▶</span>
                </div>
                
                <div class="advanced-content" id="advanced-content-3">
                    <div class="form-group">
                        <label class="form-label">Annual Appreciation Rate (%)</label>
                        <input type="number" class="input-field" id="prop-appreciation" value="1.0" step="0.1">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Annual Income Inflation (%)</label>
                        <input type="number" class="input-field" id="prop-income-inflation" value="2.0" step="0.1">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Annual Expense Inflation (%)</label>
                        <input type="number" class="input-field" id="prop-expense-inflation" value="2.0" step="0.1">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Capitalization Rate (%)</label>
                        <input type="number" class="input-field" id="prop-cap-rate" value="5.0" step="0.1">
                    </div>
                </div>
                
                <div class="summary-box">
                    <div class="summary-row" id="summary-text-3">Summary will appear here</div>
                </div>
            </div>
            
            <!-- Step 4: Image Upload -->
            <div class="form-step" id="step-4">
                <div class="form-title">Property Images</div>
                
                <div class="form-group">
                    <label class="form-label">Upload Property Images</label>
                    <div class="image-upload-area" id="image-upload-area">
                        <p>📷</p>
                        <p>Tap to upload property images</p>
                        <p style="font-size: 12px; color: #666;">Supports JPG, PNG (Max 5MB)</p>
                    </div>
                    <input type="file" id="image-upload" accept="image/*" style="display: none;">
                    <div id="image-preview-container"></div>
                </div>
                
                <div class="info-box">
                    <div class="info-box-title">Tips for better images</div>
                    <p style="font-size: 13px;">• Include clear photos of all rooms</p>
                    <p style="font-size: 13px;">• Show exterior and interior</p>
                    <p style="font-size: 13px;">• Highlight unique features</p>
                </div>
                
                <div class="summary-box">
                    <div class="summary-row" id="summary-text-4">Summary will appear here</div>
                </div>
            </div>
            
            <!-- Navigation Buttons -->
            <div class="button-row">
                <button class="btn btn-secondary" id="prev-btn" onclick="prevStep()" style="display: none;">Previous</button>
                <button class="btn btn-primary" id="next-btn" onclick="nextStep()">Next</button>
            </div>
        </div>
    </div>
    
    <!-- Properties Screen -->
    <div class="screen" id="properties">
        <div class="status-bar">
            <span>9:41</span>
            <span>📶 📡 🔋</span>
        </div>
        
        <div class="header">
            <div class="header-left">
                <h1>Properties</h1>
                <p>Portfolio</p>
            </div>
            <button class="menu-btn" id="menuBtn2">☰</button>
        </div>
        
        <div class="content">
            <div class="property-card">
                <h3>Comfort Suites Conway</h3>
                <div class="property-info" style="font-size: 12px;">
                    <label>Type:</label>
                    <value>Hotel</value>
                </div>
                <div class="property-info" style="font-size: 12px;">
                    <label>Units:</label>
                    <value>70</value>
                </div>
                <div class="property-info" style="font-size: 12px;">
                    <label>Value:</label>
                    <value>$4.8M</value>
                </div>
                <div class="property-info" style="font-size: 12px;">
                    <label>ROI:</label>
                    <value style="color: #10b981;">5.4%</value>
                </div>
                <button class="btn btn-primary" style="width: 100%; margin-top: 10px; font-size: 12px;">View Details</button>
            </div>
            
            <div class="property-card">
                <h3>Montgomery, Alabama</h3>
                <div class="property-info" style="font-size: 12px;">
                    <label>Type:</label>
                    <value>Residential</value>
                </div>
                <div class="property-info" style="font-size: 12px;">
                    <label>Units:</label>
                    <value>1</value>
                </div>
                <div class="property-info" style="font-size: 12px;">
                    <label>Value:</label>
                    <value>$150K</value>
                </div>
                <div class="property-info" style="font-size: 12px;">
                    <label>ROI:</label>
                    <value style="color: #10b981;">8.2%</value>
                </div>
                <button class="btn btn-primary" style="width: 100%; margin-top: 10px; font-size: 12px;">View Details</button>
            </div>
            
            <button class="btn btn-success" style="width: 100%; margin-top: 16px; font-size: 14px;" onclick="switchScreen('add-property-screen')">Add New Property</button>
        </div>
    </div>
    
    <!-- Alerts Screen -->
    <div class="screen" id="alerts">
        <div class="status-bar">
            <span>9:41</span>
            <span>📶 📡 🔋</span>
        </div>
        
        <div class="header">
            <div class="header-left">
                <h1>Notifications</h1>
                <p>Reminders</p>
            </div>
            <button class="menu-btn" id="menuBtn3">☰</button>
        </div>
        
        <div class="content">
            <h2 class="section-title">Upcoming</h2>
            
            <div class="property-card">
                <div class="property-info">
                    <label>Nov 15</label>
                    <span class="status-badge badge-pending">Pending</span>
                </div>
                <h3 style="font-size: 14px; margin: 8px 0; color: #333;">EMI Due</h3>
                <div class="property-info" style="font-size: 12px;">
                    <value>Comfort Suites Conway</value>
                </div>
                <div class="property-info" style="font-size: 12px;">
                    <label>Amount:</label>
                    <value>$17,717</value>
                </div>
            </div>
            
            <div class="property-card">
                <div class="property-info">
                    <label>Nov 20</label>
                    <span class="status-badge badge-pending">Pending</span>
                </div>
                <h3 style="font-size: 14px; margin: 8px 0; color: #333;">Property Tax</h3>
                <div class="property-info" style="font-size: 12px;">
                    <value>Montgomery Alabama</value>
                </div>
            </div>
            
            <div class="property-card">
                <div class="property-info">
                    <label>Dec 10</label>
                    <span class="status-badge badge-scheduled">Scheduled</span>
                </div>
                <h3 style="font-size: 14px; margin: 8px 0; color: #333;">Revaluation</h3>
                <div class="property-info" style="font-size: 12px;">
                    <value>Comfort Suites Conway</value>
                </div>
            </div>
            
            <div class="property-card">
                <div class="property-info">
                    <label>Dec 1</label>
                    <span class="status-badge badge-active">Achieved</span>
                </div>
                <h3 style="font-size: 14px; margin: 8px 0; color: #333;">ROI Milestone</h3>
                <div class="property-info" style="font-size: 12px;">
                    <value>Portfolio ROI reached 15% target</value>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Analytics Screen -->
    <div class="screen" id="analytics">
        <div class="status-bar">
            <span>9:41</span>
            <span>📶 📡 🔋</span>
        </div>
        
        <div class="header">
            <div class="header-left">
                <h1>Analytics</h1>
                <p>Performance</p>
            </div>
            <button class="menu-btn" id="menuBtn4">☰</button>
        </div>
        
        <div class="content">
            <h2 class="section-title">Cash Flow Analysis</h2>
            
            <table class="data-table">
                <thead>
                    <tr>
                        <th>Metric</th>
                        <th>Year 1</th>
                        <th>Year 5</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>NOI</td>
                        <td>$375.9K</td>
                        <td>$396.9K</td>
                    </tr>
                    <tr>
                        <td>Cash Flow</td>
                        <td>$39.0K</td>
                        <td>$59.9K</td>
                    </tr>
                    <tr>
                        <td>Cap Rate</td>
                        <td>7.9%</td>
                        <td>8.4%</td>
                    </tr>
                    <tr>
                        <td>ROI</td>
                        <td>5.4%</td>
                        <td>8.4%</td>
                    </tr>
                    <tr>
                        <td>IRR</td>
                        <td>11.6%</td>
                        <td>22.9%</td>
                    </tr>
                </tbody>
            </table>
            
            <h2 class="section-title">Equity Analysis</h2>
            
            <table class="data-table">
                <thead>
                    <tr>
                        <th>Metric</th>
                        <th>Year 1</th>
                        <th>Year 5</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Market Value</td>
                        <td>$4.8M</td>
                        <td>$5.0M</td>
                    </tr>
                    <tr>
                        <td>Loan Balance</td>
                        <td>$4.0M</td>
                        <td>$3.4M</td>
                    </tr>
                    <tr>
                        <td>Equity</td>
                        <td>$761K</td>
                        <td>$1.6M</td>
                    </tr>
                </tbody>
            </table>
            
            <button class="btn btn-primary" style="width: 100%; margin-top: 16px;">Export PDF</button>
        </div>
    </div>
    
    <!-- Settings Screen -->
    <div class="screen" id="settings">
        <div class="status-bar">
            <span>9:41</span>
            <span>📶 📡 🔋</span>
        </div>
        
        <div class="header">
            <div class="header-left">
                <h1>Settings</h1>
                <p>Account</p>
            </div>
            <button class="menu-btn" id="menuBtn5">☰</button>
        </div>
        
        <div class="content">
            <h2 class="section-title">Profile</h2>
            
            <div class="form-group">
                <label>Full Name</label>
                <input type="text" class="input-field" value="Parth Dattani">
            </div>
            
            <div class="form-group">
                <label>Email</label>
                <input type="email" class="input-field" value="parth@example.com">
            </div>
            
            <div class="form-group">
                <label>Phone</label>
                <input type="tel" class="input-field" value="+1-234-567-8900">
            </div>
            
            <h2 class="section-title">Preferences</h2>
            
            <div class="form-group">
                <label>Theme</label>
                <select class="input-field">
                    <option>Light</option>
                    <option selected>Dark</option>
                </select>
            </div>
            
            <div class="form-group">
                <label>Currency</label>
                <select class="input-field">
                    <option selected>USD ($)</option>
                    <option>EUR (€)</option>
                    <option>GBP (£)</option>
                </select>
            </div>
            
            <h2 class="section-title">Data Export</h2>
            
            <button class="btn btn-primary" style="width: 100%; margin-bottom: 10px;">Export as PDF</button>
            <button class="btn btn-primary" style="width: 100%; margin-bottom: 10px;">Export as Excel</button>
            <button class="btn btn-primary" style="width: 100%;">Export as CSV</button>
            
            <h2 class="section-title">Security</h2>
            
            <div class="form-group">
                <label>Change Password</label>
                <input type="password" class="input-field" placeholder="Current password">
            </div>
            
            <div class="form-group">
                <input type="password" class="input-field" placeholder="New password">
            </div>
            
            <button class="btn btn-success" style="width: 100%;">Save Changes</button>
        </div>
    </div>
    
    <!-- Bottom Navigation -->
    <div class="bottom-nav">
        <button class="nav-item active" data-screen="home-screen">
            <span>🏠</span>
            <span>Home</span>
        </button>
        <button class="nav-item" data-screen="analytics">
            <span>📊</span>
            <span>Analytics</span>
        </button>
        <button class="nav-item" data-screen="alerts">
            <span>🔔</span>
            <span>Alerts</span>
        </button>
        <button class="nav-item" data-screen="settings">
            <span>⚙️</span>
            <span>Settings</span>
        </button>
    </div>
</div>

<script>
    // Data Management
    let properties = JSON.parse(localStorage.getItem('properties')) || [];
    let currentStep = 1;
    let propertyData = {
        name: '',
        city: '',
        type: 'residential',
        subtype: '',
        status: 'ready',
        units: '',
        area: '',
        bathrooms: 2,
        furnished: 'unfurnished',
        price: '',
        rent: '',
        expenses: '',
        downPayment: '',
        images: []
    };
    
    // Initialize the app
    document.addEventListener('DOMContentLoaded', function() {
        updatePropertiesList();
        updateDashboardStats();
        
        // Setup event listeners
        setupEventListeners();
        
        // Setup drawer
        document.getElementById('menuBtn').addEventListener('click', toggleDrawer);
        document.getElementById('menuBtn2').addEventListener('click', toggleDrawer);
        document.getElementById('menuBtn3').addEventListener('click', toggleDrawer);
        document.getElementById('menuBtn4').addEventListener('click', toggleDrawer);
        document.getElementById('menuBtn5').addEventListener('click', toggleDrawer);
        document.getElementById('drawerOverlay').addEventListener('click', closeDrawer);
        
        // Setup drawer navigation
        document.querySelectorAll('.drawer-nav-item').forEach(item => {
            item.addEventListener('click', function(e) {
                e.preventDefault();
                const screen = this.getAttribute('data-screen');
                switchScreen(screen);
                closeDrawer();
            });
        });
        
        // Setup bottom navigation
        document.querySelectorAll('.bottom-nav .nav-item').forEach(item => {
            item.addEventListener('click', function() {
                const screen = this.getAttribute('data-screen');
                switchScreen(screen);
                
                // Update active state
                document.querySelectorAll('.bottom-nav .nav-item').forEach(nav => {
                    nav.classList.remove('active');
                });
                this.classList.add('active');
            });
        });
        
        // Setup advanced toggles
        document.getElementById('advanced-toggle').addEventListener('click', function() {
            const content = document.getElementById('advanced-content');
            content.classList.toggle('active');
            this.querySelector('span:last-child').textContent = 
                content.classList.contains('active') ? '▼' : '▶';
        });
        
        document.getElementById('advanced-toggle-2').addEventListener('click', function() {
            const content = document.getElementById('advanced-content-2');
            content.classList.toggle('active');
            this.querySelector('span:last-child').textContent = 
                content.classList.contains('active') ? '▼' : '▶';
        });
        
        document.getElementById('advanced-toggle-3').addEventListener('click', function() {
            const content = document.getElementById('advanced-content-3');
            content.classList.toggle('active');
            this.querySelector('span:last-child').textContent = 
                content.classList.contains('active') ? '▼' : '▶';
        });
        
        // Setup image upload
        document.getElementById('image-upload-area').addEventListener('click', function() {
            document.getElementById('image-upload').click();
        });
        
        document.getElementById('image-upload').addEventListener('change', function(e) {
            const files = e.target.files;
            const previewContainer = document.getElementById('image-preview-container');
            previewContainer.innerHTML = '';
            
            for (let i = 0; i < files.length; i++) {
                const file = files[i];
                const reader = new FileReader();
                
                reader.onload = function(e) {
                    const img = document.createElement('img');
                    img.src = e.target.result;
                    img.className = 'image-preview';
                    previewContainer.appendChild(img);
                    
                    // Store image data
                    propertyData.images.push(e.target.result);
                };
                
                reader.readAsDataURL(file);
            }
        });
    });
    
    // Navigation functions
    function switchScreen(screenId) {
        document.querySelectorAll('.screen').forEach(screen => {
            screen.classList.remove('active');
        });
        document.getElementById(screenId).classList.add('active');
    }
    
    function toggleDrawer() {
        document.getElementById('sideDrawer').classList.toggle('open');
        document.getElementById('drawerOverlay').classList.toggle('active');
        document.getElementById('mobileContainer').classList.toggle('drawer-open');
    }
    
    function closeDrawer() {
        document.getElementById('sideDrawer').classList.remove('open');
        document.getElementById('drawerOverlay').classList.remove('active');
        document.getElementById('mobileContainer').classList.remove('drawer-open');
    }
    
    // Property form functions
    function nextStep() {
        if (currentStep < 4) {
            document.getElementById(`step-${currentStep}`).classList.remove('active');
            currentStep++;
            document.getElementById(`step-${currentStep}`).classList.add('active');
            document.getElementById('step-number').textContent = currentStep;
            document.getElementById('progress-fill').style.width = `${currentStep * 25}%`;
            
            if (currentStep === 4) {
                document.getElementById('next-btn').textContent = 'Save Property';
            }
            
            updateSummary();
        } else {
            saveProperty();
        }
    }
    
    function prevStep() {
        if (currentStep > 1) {
            document.getElementById(`step-${currentStep}`).classList.remove('active');
            currentStep--;
            document.getElementById(`step-${currentStep}`).classList.add('active');
            document.getElementById('step-number').textContent = currentStep;
            document.getElementById('progress-fill').style.width = `${currentStep * 25}%`;
            document.getElementById('next-btn').textContent = 'Next';
        }
    }
    
    function updateStepper(type, change) {
        if (type === 'bathrooms') {
            propertyData.bathrooms = Math.max(1, propertyData.bathrooms + change);
            document.getElementById('bathrooms').textContent = propertyData.bathrooms;
            updateSummary();
        }
    }
    
    function updateSummary() {
        const step1Summary = document.getElementById('summary-text-1');
        const step2Summary = document.getElementById('summary-text-2');
        const step3Summary = document.getElementById('summary-text-3');
        const step4Summary = document.getElementById('summary-text-4');
        
        if (propertyData.name && propertyData.city) {
            step1Summary.textContent = `${propertyData.name} in ${propertyData.city}`;
        } else {
            step1Summary.textContent = 'Summary will appear here';
        }
        
        if (propertyData.units || propertyData.area) {
            let summary = '';
            if (propertyData.units) summary += `${propertyData.units} units`;
            if (propertyData.area) summary += `${propertyData.units ? ', ' : ''}${propertyData.area} sq ft`;
            step2Summary.textContent = summary || 'Summary will appear here';
        } else {
            step2Summary.textContent = 'Summary will appear here';
        }
        
        if (propertyData.price || propertyData.rent) {
            let summary = '';
            if (propertyData.price) summary += `$${Number(propertyData.price).toLocaleString()}`;
            if (propertyData.rent) summary += `${propertyData.price ? ', ' : ''}$${Number(propertyData.rent).toLocaleString()}/month`;
            step3Summary.textContent = summary || 'Summary will appear here';
        } else {
            step3Summary.textContent = 'Summary will appear here';
        }
        
        step4Summary.textContent = propertyData.images.length 
            ? `${propertyData.images.length} image(s) uploaded` 
            : 'No images uploaded yet';
    }
    
    function saveProperty() {
        // Validate required fields
        if (!propertyData.name || !propertyData.city || !propertyData.units || 
            !propertyData.area || !propertyData.price || !propertyData.rent) {
            alert('Please fill in all required fields');
            return;
        }
        
        // Create property object
        const property = {
            id: Date.now(),
            name: propertyData.name,
            city: propertyData.city,
            type: propertyData.type,
            subtype: propertyData.subtype,
            status: propertyData.status,
            units: propertyData.units,
            area: propertyData.area,
            bathrooms: propertyData.bathrooms,
            furnished: propertyData.furnished,
            price: parseFloat(propertyData.price),
            rent: parseFloat(propertyData.rent),
            expenses: parseFloat(propertyData.expenses) || 0,
            downPayment: parseFloat(propertyData.downPayment) || 20,
            images: propertyData.images,
            dateAdded: new Date().toISOString()
        };
        
        // Add to properties array
        properties.push(property);
        
        // Save to localStorage
        localStorage.setItem('properties', JSON.stringify(properties));
        
        // Reset form
        resetPropertyForm();
        
        // Show success message and navigate to properties screen
        alert('Property added successfully!');
        switchScreen('properties');
        updatePropertiesList();
        updateDashboardStats();
    }
    
    function resetPropertyForm() {
        currentStep = 1;
        propertyData = {
            name: '',
            city: '',
            type: 'residential',
            subtype: '',
            status: 'ready',
            units: '',
            area: '',
            bathrooms: 2,
            furnished: 'unfurnished',
            price: '',
            rent: '',
            expenses: '',
            downPayment: '',
            images: []
        };
        
        // Reset UI
        document.querySelectorAll('.form-step').forEach(step => {
            step.classList.remove('active');
        });
        document.getElementById('step-1').classList.add('active');
        document.getElementById('step-number').textContent = '1';
        document.getElementById('progress-fill').style.width = '25%';
        document.getElementById('next-btn').textContent = 'Next';
        
        // Reset form fields
        document.getElementById('prop-name').value = '';
        document.getElementById('prop-city').value = '';
        document.getElementById('prop-units').value = '';
        document.getElementById('prop-area').value = '';
        document.getElementById('prop-price').value = '';
        document.getElementById('prop-rent').value = '';
        document.getElementById('prop-expenses').value = '';
        document.getElementById('prop-down').value = '';
        document.getElementById('bathrooms').textContent = '2';
        document.getElementById('image-preview-container').innerHTML = '';
        
        // Reset toggles and chips
        document.querySelectorAll('.toggle-option[data-type]').forEach(btn => {
            btn.classList.remove('active');
        });
        document.querySelector('.toggle-option[data-type="residential"]').classList.add('active');
        
        document.querySelectorAll('.toggle-option[data-status]').forEach(btn => {
            btn.classList.remove('active');
        });
        document.querySelector('.toggle-option[data-status="ready"]').classList.add('active');
        
        document.querySelectorAll('.chip-btn').forEach(chip => {
            chip.classList.remove('selected');
        });
        
        updateSummary();
    }
    
    function cancelAddProperty() {
        if (confirm('Are you sure you want to cancel? All entered data will be lost.')) {
            resetPropertyForm();
            switchScreen('home-screen');
        }
    }
    
    // Property list functions
    function updatePropertiesList() {
        const propertiesList = document.getElementById('properties-list');
        
        if (properties.length === 0) {
            propertiesList.innerHTML = '<p>No properties added yet. Click "Add Property" to get started.</p>';
            return;
        }
        
        let html = '';
        properties.forEach(property => {
            const capRate = calculateCapRate(property);
            const cashFlow = calculateCashFlow(property);
            
            html += `
                <div class="property-card">
                    <h3>${property.name}</h3>
                    <div class="property-info">
                        <label>Address:</label>
                        <value>${property.city}</value>
                    </div>
                    <div class="property-info">
                        <label>Purchase Price:</label>
                        <value>$${Number(property.price).toLocaleString()}</value>
                    </div>
                    <div class="property-info">
                        <label>Units:</label>
                        <value>${property.units}</value>
                    </div>
                    <div class="property-info">
                        <label>Cap Rate:</label>
                        <value>${capRate}%</value>
                    </div>
                    <div class="property-info">
                        <label>Cash Flow:</label>
                        <value>$${cashFlow}</value>
                    </div>
                </div>
            `;
        });
        
        propertiesList.innerHTML = html;
    }
    
    function updateDashboardStats() {
        const totalProperties = properties.length;
        const totalValue = properties.reduce((sum, prop) => sum + prop.price, 0);
        const totalRent = properties.reduce((sum, prop) => sum + prop.rent, 0);
        const totalExpenses = properties.reduce((sum, prop) => sum + (prop.expenses || 0), 0);
        
        // Calculate average cap rate
        let totalCapRate = 0;
        properties.forEach(prop => {
            totalCapRate += calculateCapRate(prop);
        });
        const avgCapRate = totalProperties > 0 ? (totalCapRate / totalProperties).toFixed(1) : 0;
        
        // Calculate total ROI (simplified)
        const totalROI = totalProperties > 0 ? (totalRent * 12 - totalExpenses) / totalValue * 100 : 0;
        
        // Calculate total cash flow
        const totalCashFlow = totalRent - (totalExpenses / 12);
        
        // Update DOM elements
        document.getElementById('total-properties').textContent = totalProperties;
        document.getElementById('total-value').textContent = `$${Number(totalValue).toLocaleString()}`;
        document.getElementById('total-roi').textContent = `${totalROI.toFixed(1)}%`;
        document.getElementById('total-cash-flow').textContent = `$${Number(totalCashFlow).toLocaleString()}`;
        
        // Simplified calculations for other metrics
        document.getElementById('total-equity').textContent = `$${Number(totalValue * 0.3).toLocaleString()}`;
        document.getElementById('total-loan-balance').textContent = `$${Number(totalValue * 0.7).toLocaleString()}`;
        document.getElementById('total-annual-noi').textContent = `$${Number(totalRent * 12 - totalExpenses).toLocaleString()}`;
    }
    
    function calculateCapRate(property) {
        const annualRent = property.rent * 12;
        const annualExpenses = property.expenses || 0;
        const noi = annualRent - annualExpenses;
        return property.price > 0 ? ((noi / property.price) * 100).toFixed(1) : 0;
    }
    
    function calculateCashFlow(property) {
        const monthlyRent = property.rent;
        const monthlyExpenses = (property.expenses || 0) / 12;
        return Number(monthlyRent - monthlyExpenses).toFixed(0);
    }
    
    // Setup event listeners for form elements
    function setupEventListeners() {
        // Property type toggle
        document.querySelectorAll('.toggle-option[data-type]').forEach(option => {
            option.addEventListener('click', function() {
                document.querySelectorAll('.toggle-option[data-type]').forEach(btn => {
                    btn.classList.remove('active');
                });
                this.classList.add('active');
                propertyData.type = this.getAttribute('data-type');
                updateSummary();
            });
        });
        
        // Property status toggle
        document.querySelectorAll('.toggle-option[data-status]').forEach(option => {
            option.addEventListener('click', function() {
                document.querySelectorAll('.toggle-option[data-status]').forEach(btn => {
                    btn.classList.remove('active');
                });
                this.classList.add('active');
                propertyData.status = this.getAttribute('data-status');
                updateSummary();
            });
        });
        
        // Subtype chips
        document.querySelectorAll('.chip-btn[data-subtype]').forEach(chip => {
            chip.addEventListener('click', function() {
                document.querySelectorAll('.chip-btn[data-subtype]').forEach(btn => {
                    btn.classList.remove('selected');
                });
                this.classList.add('selected');
                propertyData.subtype = this.getAttribute('data-subtype');
                updateSummary();
            });
        });
        
        // Units chips
        document.querySelectorAll('.chip-btn[data-units]').forEach(chip => {
            chip.addEventListener('click', function() {
                document.querySelectorAll('.chip-btn[data-units]').forEach(btn => {
                    btn.classList.remove('selected');
                });
                this.classList.add('selected');
                propertyData.units = this.getAttribute('data-units');
                document.getElementById('prop-units').value = propertyData.units;
                updateSummary();
            });
        });
        
        // Down payment chips
        document.querySelectorAll('.chip-btn[data-down]').forEach(chip => {
            chip.addEventListener('click', function() {
                document.querySelectorAll('.chip-btn[data-down]').forEach(btn => {
                    btn.classList.remove('selected');
                });
                this.classList.add('selected');
                propertyData.downPayment = this.getAttribute('data-down');
                document.getElementById('prop-down').value = propertyData.downPayment;
                updateSummary();
            });
        });
        
        // Input field listeners
        document.getElementById('prop-name').addEventListener('input', function() {
            propertyData.name = this.value;
            updateSummary();
        });
        
        document.getElementById('prop-city').addEventListener('input', function() {
            propertyData.city = this.value;
            updateSummary();
        });
        
        document.getElementById('prop-units').addEventListener('input', function() {
            propertyData.units = this.value;
            updateSummary();
        });
        
        document.getElementById('prop-area').addEventListener('input', function() {
            propertyData.area = this.value;
            updateSummary();
        });
        
        document.getElementById('prop-price').addEventListener('input', function() {
            propertyData.price = this.value;
            updateSummary();
        });
        
        document.getElementById('prop-rent').addEventListener('input', function() {
            propertyData.rent = this.value;
            updateSummary();
        });
        
        document.getElementById('prop-expenses').addEventListener('input', function() {
            propertyData.expenses = this.value;
            updateSummary();
        });
        
        document.getElementById('prop-down').addEventListener('input', function() {
            propertyData.downPayment = this.value;
            updateSummary();
        });
        
        document.getElementById('prop-furnished').addEventListener('change', function() {
            propertyData.furnished = this.value;
            updateSummary();
        });
    }
</script>

</body>
</html>